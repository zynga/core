<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01//EN"
   "http://www.w3.org/TR/html4/strict.dtd">

<html>
<head>
  <title></title>
  <meta http-equiv="content-type" content="text/html; charset=None">
  <style type="text/css">
td.linenos { background-color: #f0f0f0; padding-right: 10px; }
span.lineno { background-color: #f0f0f0; padding: 0 5px 0 5px; }
pre { line-height: 125%; }
body .hll { background-color: #ffffcc }
body  { background: #ffffff; }
body .c { color: #aaaaaa; font-style: italic } /* Comment */
body .err { color: #F00000; background-color: #F0A0A0 } /* Error */
body .k { color: #0000aa } /* Keyword */
body .cm { color: #aaaaaa; font-style: italic } /* Comment.Multiline */
body .cp { color: #4c8317 } /* Comment.Preproc */
body .c1 { color: #aaaaaa; font-style: italic } /* Comment.Single */
body .cs { color: #0000aa; font-style: italic } /* Comment.Special */
body .gd { color: #aa0000 } /* Generic.Deleted */
body .ge { font-style: italic } /* Generic.Emph */
body .gr { color: #aa0000 } /* Generic.Error */
body .gh { color: #000080; font-weight: bold } /* Generic.Heading */
body .gi { color: #00aa00 } /* Generic.Inserted */
body .go { color: #888888 } /* Generic.Output */
body .gp { color: #555555 } /* Generic.Prompt */
body .gs { font-weight: bold } /* Generic.Strong */
body .gu { color: #800080; font-weight: bold } /* Generic.Subheading */
body .gt { color: #aa0000 } /* Generic.Traceback */
body .kc { color: #0000aa } /* Keyword.Constant */
body .kd { color: #0000aa } /* Keyword.Declaration */
body .kn { color: #0000aa } /* Keyword.Namespace */
body .kp { color: #0000aa } /* Keyword.Pseudo */
body .kr { color: #0000aa } /* Keyword.Reserved */
body .kt { color: #00aaaa } /* Keyword.Type */
body .m { color: #009999 } /* Literal.Number */
body .s { color: #aa5500 } /* Literal.String */
body .na { color: #1e90ff } /* Name.Attribute */
body .nb { color: #00aaaa } /* Name.Builtin */
body .nc { color: #00aa00; text-decoration: underline } /* Name.Class */
body .no { color: #aa0000 } /* Name.Constant */
body .nd { color: #888888 } /* Name.Decorator */
body .ni { color: #800000; font-weight: bold } /* Name.Entity */
body .nf { color: #00aa00 } /* Name.Function */
body .nn { color: #00aaaa; text-decoration: underline } /* Name.Namespace */
body .nt { color: #1e90ff; font-weight: bold } /* Name.Tag */
body .nv { color: #aa0000 } /* Name.Variable */
body .ow { color: #0000aa } /* Operator.Word */
body .w { color: #bbbbbb } /* Text.Whitespace */
body .mf { color: #009999 } /* Literal.Number.Float */
body .mh { color: #009999 } /* Literal.Number.Hex */
body .mi { color: #009999 } /* Literal.Number.Integer */
body .mo { color: #009999 } /* Literal.Number.Oct */
body .sb { color: #aa5500 } /* Literal.String.Backtick */
body .sc { color: #aa5500 } /* Literal.String.Char */
body .sd { color: #aa5500 } /* Literal.String.Doc */
body .s2 { color: #aa5500 } /* Literal.String.Double */
body .se { color: #aa5500 } /* Literal.String.Escape */
body .sh { color: #aa5500 } /* Literal.String.Heredoc */
body .si { color: #aa5500 } /* Literal.String.Interpol */
body .sx { color: #aa5500 } /* Literal.String.Other */
body .sr { color: #009999 } /* Literal.String.Regex */
body .s1 { color: #aa5500 } /* Literal.String.Single */
body .ss { color: #0000aa } /* Literal.String.Symbol */
body .bp { color: #00aaaa } /* Name.Builtin.Pseudo */
body .vc { color: #aa0000 } /* Name.Variable.Class */
body .vg { color: #aa0000 } /* Name.Variable.Global */
body .vi { color: #aa0000 } /* Name.Variable.Instance */
body .il { color: #009999 } /* Literal.Number.Integer.Long */

  </style>
</head>
<body>
<h2></h2>

<table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>  1
  2
  3
  4
  5
  6
  7
  8
  9
 10
 11
 12
 13
 14
 15
 16
 17
 18
 19
 20
 21
 22
 23
 24
 25
 26
 27
 28
 29
 30
 31
 32
 33
 34
 35
 36
 37
 38
 39
 40
 41
 42
 43
 44
 45
 46
 47
 48
 49
 50
 51
 52
 53
 54
 55
 56
 57
 58
 59
 60
 61
 62
 63
 64
 65
 66
 67
 68
 69
 70
 71
 72
 73
 74
 75
 76
 77
 78
 79
 80
 81
 82
 83
 84
 85
 86
 87
 88
 89
 90
 91
 92
 93
 94
 95
 96
 97
 98
 99
100
101
102
103
104
105
106
107
108
109
110
111
112
113
114
115
116
117
118
119
120
121
122
123
124
125
126
127
128
129
130
131
132
133
134
135
136
137
138
139
140
141
142
143
144
145
146
147
148
149
150
151
152
153
154
155
156
157
158
159
160
161
162
163
164</pre></div></td><td class="code"><div class="highlight"><pre><a name="line-1"></a><span class="cm">/**</span>
<a name="line-2"></a><span class="cm"> * This Dog class lets you create a Dog that you</span>
<a name="line-3"></a><span class="cm"> * can feed, walk and just do things that you</span>
<a name="line-4"></a><span class="cm"> * are used to while playing Tamagotchi. :)</span>
<a name="line-5"></a><span class="cm"> *</span>
<a name="line-6"></a><span class="cm"> * This example shows how to handle a brown dog that</span>
<a name="line-7"></a><span class="cm"> * is hungry and weights 40kg (and is not naked):</span>
<a name="line-8"></a><span class="cm"> *</span>
<a name="line-9"></a><span class="cm"> * ```</span>
<a name="line-10"></a><span class="cm"> * var myDog = new api.test.Dog(&#39;brown&#39;, true, 40, false);</span>
<a name="line-11"></a><span class="cm"> * myDog.feed(new api.test.Food(5)); // 5kg, kinda American way!</span>
<a name="line-12"></a><span class="cm"> * myDog.walk(200); // lets him walk 200m</span>
<a name="line-13"></a><span class="cm"> * ```</span>
<a name="line-14"></a><span class="cm"> *</span>
<a name="line-15"></a><span class="cm"> * #version(1.0)</span>
<a name="line-16"></a><span class="cm"> * #version(1.1)</span>
<a name="line-17"></a><span class="cm"> * #awesome</span>
<a name="line-18"></a><span class="cm"> */</span>
<a name="line-19"></a><span class="nx">core</span><span class="p">.</span><span class="nx">Class</span><span class="p">(</span><span class="s1">&#39;api.test.Dog&#39;</span><span class="p">,</span> <span class="p">{</span>
<a name="line-20"></a>
<a name="line-21"></a>  <span class="nx">implement</span><span class="o">:</span> <span class="p">[</span> <span class="nx">api</span><span class="p">.</span><span class="nx">test</span><span class="p">.</span><span class="nx">Mammalian</span> <span class="p">],</span>
<a name="line-22"></a>  <span class="nx">include</span><span class="o">:</span> <span class="p">[</span> <span class="nx">api</span><span class="p">.</span><span class="nx">test</span><span class="p">.</span><span class="nx">Animal</span> <span class="p">],</span>
<a name="line-23"></a>
<a name="line-24"></a>  <span class="cm">/**</span>
<a name="line-25"></a><span class="cm">   * This will create a new Dog for your Tamagochi environment.</span>
<a name="line-26"></a><span class="cm">   *</span>
<a name="line-27"></a><span class="cm">   * The @color {String} will set the fur color, the @hungry {Boolean}</span>
<a name="line-28"></a><span class="cm">   * flag lets him be hungry or not (hungry is defaulted with `true`).</span>
<a name="line-29"></a><span class="cm">   *</span>
<a name="line-30"></a><span class="cm">   * The dog has also a @weight {Number} that you can set. It is used</span>
<a name="line-31"></a><span class="cm">   * to calculate when it&#39;s hungry again if you walk the dog and it</span>
<a name="line-32"></a><span class="cm">   * gets tired or an empty stomach.</span>
<a name="line-33"></a><span class="cm">   *</span>
<a name="line-34"></a><span class="cm">   * The last, optional flag @nakedDog {Boolean} lets you have a naked</span>
<a name="line-35"></a><span class="cm">   * ugly dog, just like those for VIP females.</span>
<a name="line-36"></a><span class="cm">   */</span>
<a name="line-37"></a>  <span class="nx">construct</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">color</span><span class="p">,</span> <span class="nx">hungry</span><span class="p">,</span> <span class="nx">weight</span><span class="p">,</span> <span class="nx">nakedDog</span><span class="p">)</span> <span class="p">{</span>
<a name="line-38"></a>
<a name="line-39"></a>    <span class="c1">// yay, the dog can be painted, but the color</span>
<a name="line-40"></a>    <span class="c1">// of the fur stays the same :)</span>
<a name="line-41"></a>
<a name="line-42"></a>    <span class="k">this</span><span class="p">.</span><span class="nx">setColor</span><span class="p">(</span><span class="nx">color</span><span class="p">);</span>
<a name="line-43"></a>
<a name="line-44"></a>    <span class="kd">var</span> <span class="nx">fur</span> <span class="o">=</span> <span class="p">{</span>
<a name="line-45"></a>      <span class="nx">color</span><span class="o">:</span> <span class="k">this</span><span class="p">.</span><span class="nx">getColor</span><span class="p">()</span>
<a name="line-46"></a>    <span class="p">};</span>
<a name="line-47"></a>
<a name="line-48"></a>    <span class="k">if</span> <span class="p">(</span><span class="nx">nakedDog</span><span class="p">)</span> <span class="p">{</span>
<a name="line-49"></a>      <span class="nx">fur</span><span class="p">.</span><span class="nx">hair</span> <span class="o">=</span> <span class="mi">4</span><span class="p">;</span>
<a name="line-50"></a>    <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
<a name="line-51"></a>      <span class="nx">fur</span><span class="p">.</span><span class="nx">hair</span> <span class="o">=</span> <span class="mi">1</span><span class="nx">e9</span><span class="p">;</span>
<a name="line-52"></a>    <span class="p">}</span>
<a name="line-53"></a>
<a name="line-54"></a>    <span class="k">this</span><span class="p">.</span><span class="nx">setFur</span><span class="p">(</span><span class="nx">fur</span><span class="p">);</span>
<a name="line-55"></a>    <span class="k">this</span><span class="p">.</span><span class="nx">setHungry</span><span class="p">(</span><span class="nx">hungry</span> <span class="o">||</span> <span class="kc">true</span><span class="p">);</span>
<a name="line-56"></a>
<a name="line-57"></a>    <span class="k">this</span><span class="p">.</span><span class="nx">setWeight</span><span class="p">(</span><span class="nx">weight</span> <span class="o">||</span> <span class="kc">false</span><span class="p">);</span>
<a name="line-58"></a>
<a name="line-59"></a>    <span class="c1">// required for calculation when walking the dog :)</span>
<a name="line-60"></a>    <span class="k">this</span><span class="p">.</span><span class="nx">__initialWeight</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">getWeight</span><span class="p">();</span>
<a name="line-61"></a>
<a name="line-62"></a>  <span class="p">},</span>
<a name="line-63"></a>
<a name="line-64"></a>  <span class="nx">properties</span><span class="o">:</span> <span class="p">{</span>
<a name="line-65"></a>    
<a name="line-66"></a>    <span class="c1">// interface implementation</span>
<a name="line-67"></a>    <span class="nx">fur</span><span class="o">:</span> <span class="p">{</span>
<a name="line-68"></a>      <span class="nx">type</span><span class="o">:</span> <span class="s1">&#39;Object&#39;</span><span class="p">,</span>
<a name="line-69"></a>      <span class="nx">fire</span><span class="o">:</span> <span class="s1">&#39;changeFur&#39;</span><span class="p">,</span>
<a name="line-70"></a>      <span class="nx">apply</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">value</span><span class="p">,</span> <span class="nx">old</span><span class="p">)</span> <span class="p">{</span>
<a name="line-71"></a>      <span class="p">}</span>
<a name="line-72"></a>    <span class="p">},</span>
<a name="line-73"></a>
<a name="line-74"></a>    <span class="cm">/**</span>
<a name="line-75"></a><span class="cm">     * Even dogs have teeth! #wonderful</span>
<a name="line-76"></a><span class="cm">     */</span>
<a name="line-77"></a>    <span class="nx">teeth</span><span class="o">:</span> <span class="p">{</span>
<a name="line-78"></a>      <span class="nx">type</span><span class="o">:</span> <span class="s1">&#39;Number&#39;</span><span class="p">,</span>
<a name="line-79"></a>      <span class="nx">fire</span><span class="o">:</span> <span class="s1">&#39;looseTeeth&#39;</span><span class="p">,</span>
<a name="line-80"></a>      <span class="nx">init</span><span class="o">:</span> <span class="mi">42</span><span class="p">,</span> <span class="c1">// yes, this dog is a bit older</span>
<a name="line-81"></a>      <span class="nx">apply</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">value</span><span class="p">,</span> <span class="nx">old</span><span class="p">)</span> <span class="p">{</span>
<a name="line-82"></a>      <span class="p">}</span>
<a name="line-83"></a>    <span class="p">},</span>
<a name="line-84"></a>
<a name="line-85"></a>    <span class="c1">// interface implementation</span>
<a name="line-86"></a>    <span class="nx">bones</span><span class="o">:</span> <span class="p">{</span>
<a name="line-87"></a>      <span class="nx">type</span><span class="o">:</span> <span class="s1">&#39;Number&#39;</span><span class="p">,</span>
<a name="line-88"></a>      <span class="nx">fire</span><span class="o">:</span> <span class="s1">&#39;breakBones&#39;</span><span class="p">,</span>
<a name="line-89"></a>      <span class="nx">init</span><span class="o">:</span> <span class="mi">321</span><span class="p">,</span> <span class="c1">// yep, nothing broke, yet</span>
<a name="line-90"></a>      <span class="nx">apply</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">value</span><span class="p">,</span> <span class="nx">old</span><span class="p">)</span> <span class="p">{</span>
<a name="line-91"></a>      <span class="p">}</span>
<a name="line-92"></a>    <span class="p">}</span>
<a name="line-93"></a>
<a name="line-94"></a>  <span class="p">},</span>
<a name="line-95"></a>
<a name="line-96"></a>  <span class="nx">members</span><span class="o">:</span> <span class="p">{</span>
<a name="line-97"></a>    
<a name="line-98"></a>    <span class="cm">/** Enum about a dog being fat */</span>
<a name="line-99"></a>    <span class="nx">FAT</span> <span class="o">:</span> <span class="mi">3</span><span class="p">,</span>
<a name="line-100"></a>    <span class="cm">/** Enum about a dog being normal */</span>
<a name="line-101"></a>    <span class="nx">NORMAL</span> <span class="o">:</span> <span class="mi">2</span><span class="p">,</span>
<a name="line-102"></a>    <span class="cm">/** Enum about a dog being slim */</span>
<a name="line-103"></a>    <span class="nx">SLIM</span> <span class="o">:</span> <span class="mi">1</span><span class="p">,</span>
<a name="line-104"></a>    
<a name="line-105"></a>    <span class="cm">/**</span>
<a name="line-106"></a><span class="cm">     * Play with the dog using arbitrary number of @objects {Object...}.</span>
<a name="line-107"></a><span class="cm">     * </span>
<a name="line-108"></a><span class="cm">     * #cute</span>
<a name="line-109"></a><span class="cm">     */</span>
<a name="line-110"></a>    <span class="nx">play</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">objects</span><span class="p">)</span> <span class="p">{</span>
<a name="line-111"></a>      
<a name="line-112"></a>    <span class="p">},</span>
<a name="line-113"></a>    
<a name="line-114"></a>    <span class="cm">/** Train the dog. #deprecated */</span>
<a name="line-115"></a>    <span class="nx">train</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
<a name="line-116"></a>      
<a name="line-117"></a>    <span class="p">},</span>
<a name="line-118"></a>
<a name="line-119"></a>    <span class="cm">/**</span>
<a name="line-120"></a><span class="cm">     * This method is required for firing events on the dog itself.</span>
<a name="line-121"></a><span class="cm">     *</span>
<a name="line-122"></a><span class="cm">     * The event @type {String}, the @value {var} and the @old {var} value.</span>
<a name="line-123"></a><span class="cm">     */</span>
<a name="line-124"></a>    <span class="nx">fireEvent</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">type</span><span class="p">,</span> <span class="nx">value</span><span class="p">,</span> <span class="nx">old</span><span class="p">)</span> <span class="p">{</span>
<a name="line-125"></a>
<a name="line-126"></a>    <span class="p">},</span>
<a name="line-127"></a>
<a name="line-128"></a>    <span class="cm">/**</span>
<a name="line-129"></a><span class="cm">     * {Boolean} This method will walk the Dog @meters {Number}</span>
<a name="line-130"></a><span class="cm">     *</span>
<a name="line-131"></a><span class="cm">     * The dog will loose {property:#weight}, so don&#39;t</span>
<a name="line-132"></a><span class="cm">     * let it be {property:#hungry} for a too long time.</span>
<a name="line-133"></a><span class="cm">     */</span>
<a name="line-134"></a>    <span class="nx">walk</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">meters</span><span class="p">)</span> <span class="p">{</span>
<a name="line-135"></a>
<a name="line-136"></a>      <span class="c1">// Nope. I&#39;m hungry, feed me, woof!</span>
<a name="line-137"></a>      <span class="k">if</span> <span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">isHungry</span><span class="p">()</span> <span class="o">===</span> <span class="kc">true</span><span class="p">)</span> <span class="p">{</span>
<a name="line-138"></a>        <span class="k">return</span> <span class="kc">false</span><span class="p">;</span>
<a name="line-139"></a>      <span class="p">}</span>
<a name="line-140"></a>
<a name="line-141"></a>      <span class="k">if</span> <span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">isHungry</span><span class="p">()</span> <span class="o">===</span> <span class="kc">false</span><span class="p">)</span> <span class="p">{</span>
<a name="line-142"></a>
<a name="line-143"></a>        <span class="c1">// 10m per second... fast dog, hugh?</span>
<a name="line-144"></a>        <span class="kd">var</span> <span class="nx">work</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">getWeight</span><span class="p">()</span> <span class="o">*</span> <span class="mi">10</span> <span class="o">*</span> <span class="nx">meters</span><span class="p">;</span>
<a name="line-145"></a>
<a name="line-146"></a>        <span class="c1">// 1 kcal = 4184 kJ, 7.000 kcal/kg</span>
<a name="line-147"></a>        <span class="kd">var</span> <span class="nx">newWeight</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">getWeight</span><span class="p">()</span> <span class="o">-</span> <span class="p">(</span><span class="nx">work</span> <span class="o">/</span> <span class="mi">4184</span> <span class="o">/</span> <span class="mi">7000</span><span class="p">);</span>
<a name="line-148"></a>
<a name="line-149"></a>        <span class="c1">// Dog is hungry now, stomach is empty</span>
<a name="line-150"></a>        <span class="k">if</span> <span class="p">(</span><span class="nx">newWeight</span> <span class="o">&lt;=</span> <span class="k">this</span><span class="p">.</span><span class="nx">__initialWeight</span><span class="p">)</span> <span class="p">{</span>
<a name="line-151"></a>          <span class="k">this</span><span class="p">.</span><span class="nx">setHungry</span><span class="p">(</span><span class="kc">true</span><span class="p">);</span>
<a name="line-152"></a>        <span class="p">}</span>
<a name="line-153"></a>
<a name="line-154"></a>        <span class="k">this</span><span class="p">.</span><span class="nx">setWeight</span><span class="p">(</span><span class="nx">newWeight</span><span class="p">);</span>
<a name="line-155"></a>
<a name="line-156"></a>        <span class="k">return</span> <span class="kc">true</span><span class="p">;</span>
<a name="line-157"></a>
<a name="line-158"></a>      <span class="p">}</span>
<a name="line-159"></a>
<a name="line-160"></a>    <span class="p">}</span>
<a name="line-161"></a>
<a name="line-162"></a>  <span class="p">}</span>
<a name="line-163"></a>
<a name="line-164"></a><span class="p">});</span>
</pre></div>
</td></tr></table></body>
</html>
